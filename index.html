<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Ruta</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> <!-- Agregar jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-light">
    <div class="container-fluid mt-4">
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-6">
                <div class="card shadow-lg">
                    <!-- Card Header -->
                    <div class="card-header text-center bg-gradient-primary text-white py-4">
                        <h2 class="reporte-diario mb-0">Reporte Diario de Ruta</h2>
                    </div>

                    <!-- Total de Caja Inicial -->
                    <div class="form-group">
                        <label for="totalCaja">Total de Caja Inicial:</label>
                        <input type="number" id="totalCaja" class="form-control" step="0.01" placeholder="Ingrese el total de caja inicial" onchange="calcularCajaRestante()">
                    </div>

                    <!-- Caja Restante -->
                    <div class="form-group">
                        <label for="cajaRestante">Caja Restante:</label>
                        <input type="number" id="cajaRestante" class="form-control" step="0.01" placeholder="Caja restante" readonly>
                    </div>

                    <!-- Card Body -->
                    <div class="card-body">
                        <form id="formularioReporte">
                             <!-- Clientes Cancelados -->
                            <div class="form-group">
                                <label for="clientesCancelados">Clientes Cancelados:</label>
                                <input type="number" id="clientesCanceladosInput" class="form-control" max="10" min="0" placeholder="Cantidad de clientes cancelados" onchange="generarCamposClientesCancelados()">
                            </div>
                            <div id="clientesCancelados" class="form-group"></div>

                            <!-- Clientes Nuevos -->
                            <h4 class="text-primary">Clientes Nuevos</h4>
                            <div class="form-group">
                                <label for="numClientesNuevos">Cantidad de Clientes Nuevos:</label>
                                <input type="number" id="numClientesNuevos" class="form-control" max="10" min="0" placeholder="Ingrese el número de clientes nuevos" onchange="generarCampos('clientesNuevos', 'Cliente Nuevo', 'Monto')">
                            </div>
                            <div id="clientesNuevos" class="form-group"></div>

                            <!-- Renovaciones -->
                            <h4 class="text-primary">Renovaciones</h4>
                            <div class="form-group">
                                <label for="numRenovaciones">Cantidad de Renovaciones:</label>
                                <input type="number" id="numRenovaciones" class="form-control" max="10" min="0" placeholder="Ingrese el número de renovaciones" onchange="generarCampos('renovaciones', 'Renovación', 'Monto')">
                            </div>
                            <div id="renovaciones" class="form-group"></div>

                            <!-- Total Prestado -->
                            <div class="form-group">
                                <label for="totalPrestado">Total Prestado en la Ruta:</label>
                                <input type="number" id="totalPrestado" class="form-control" step="0.01" placeholder="Monto total prestado" readonly>
                            </div>

                            <!-- Gastos -->
                            <h4 class="text-primary">Gastos</h4>
                            <div class="form-group">
                                <label for="numGastos">Número de Gastos:</label>
                                <input type="number" id="numGastos" class="form-control" max="10" min="0" placeholder="Ingrese el número de gastos" onchange="generarCampos('gastos', 'Descripción del Gasto', 'Monto')">
                            </div>
                            <div id="gastos" class="form-group"></div>

                            <!-- Total Gastos -->
                            <div class="form-group">
                                <label for="totalGastos">Total Gastos:</label>
                                <input type="number" id="totalGastos" class="form-control" step="0.01" placeholder="Total de gastos" readonly>
                            </div>

                            <!-- Total Clientes -->
                            <div class="form-group">
                                <label for="totalClientes">Total de Clientes en la Ruta:</label>
                                <input type="number" id="totalClientes" class="form-control" placeholder="Total de clientes" onchange="calcularPorcentajeGestion()">
                            </div>

                            <!-- Clientes Gestionados -->
                            <div class="form-group">
                                <label for="clientesGestionados">Clientes Gestionados:</label>
                                <input type="number" id="clientesGestionados" class="form-control" placeholder="Cantidad de clientes gestionados" onchange="calcularPorcentajeGestion()">
                            </div>

                            <!-- Porcentaje Gestión -->
                            <div class="form-group">
                                <label for="porcentajeGestion">Porcentaje de Gestión:</label>
                                <div class="input-group">
                                    <input type="number" id="porcentajeGestion" class="form-control" placeholder="Porcentaje de gestión" readonly>
                                    <div class="input-group-append">
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Total Recaudado -->
                            <div class="form-group">
                                <label for="totalRecaudado">Total Recaudado:</label>
                                <input type="number" id="totalRecaudado" class="form-control" step="0.01" placeholder="Monto total recaudado">
                            </div>

                            <!-- Botón para generar y descargar el reporte -->
                            <button type="button" id="botonGenerarPDF" class="btn btn-primary btn-block" onclick="generarPDF()">Generar y Descargar Reporte</button>

                        </form>
                    </div>

                    <!-- Card Footer -->
                    <div class="card-footer text-center text-muted py-3">
                        Desarrollado por Cristian Ruiz
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vinculando el archivo JavaScript -->
    <script src="/scripts.js"></script>
</body>
</html>
